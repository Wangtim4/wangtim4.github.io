{"version":3,"file":"js/498.cb96e1c9.js","mappings":"sPACSA,MAAM,kB,GACEA,MAAM,U,ycASIA,MAAM,8C,UACTC,EAAAA,EAAAA,GAUQ,SAVDD,MAAM,yBAAyB,EAElCC,EAAAA,EAAAA,GAOK,YANDA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAiC,MAA7BC,MAAA,iBAAsB,OAC1BD,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAS,e,aAUAD,MAAM,e,mDAIFA,MAAM,oB,mCAOiEC,EAAAA,EAAAA,GACjD,KAAvBD,MAAM,cAAY,W,GADsDG,G,GAIrFH,MAAM,Q,GAEDI,QAAQ,IAAIJ,MAAM,Y,GAI7BA,MAAM,kC,UAEPC,EAAAA,EAAAA,GAA2F,UAAnFD,MAAM,4BAA0B,EAACC,EAAAA,EAAAA,GAAqC,KAAlCD,MAAM,2BAAuB,QAAK,UAAI,K,UAGlFC,EAAAA,EAAAA,GAAwF,UAAhFD,MAAM,yBAAuB,UAAC,QAAGC,EAAAA,EAAAA,GAAsC,KAAnCD,MAAM,6BAAwB,K,SAI7EA,MAAM,oB,UACPC,EAAAA,EAAAA,GAEK,MAFDD,MAAM,aAAY,yBAEtB,K,UAEIC,EAAAA,EAAAA,GAA2F,UAAnFD,MAAM,4BAA0B,EAACC,EAAAA,EAAAA,GAAqC,KAAlCD,MAAM,2BAAuB,QAAK,UAAI,K,0EAhEtGK,EAAAA,EAAAA,IAqEU,MArEVC,EAqEU,EApEFL,EAAAA,EAAAA,GAmEM,MAnENM,EAmEM,CAlESC,EAAAC,KAAKC,MAAMC,OAAS,IAAH,WAA5BN,EAAAA,EAAAA,IAwDM,MAAAO,EAAA,CAvDFC,GAOAZ,EAAAA,EAAAA,GAuCQ,QAvCRa,EAuCQ,CAtCJC,GAWAd,EAAAA,EAAAA,GAqBQ,6BApBJI,EAAAA,EAAAA,IAmBKW,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAnBcT,EAAAC,KAAKC,OAAbQ,K,WAAXb,EAAAA,EAAAA,IAmBK,MAnB2Bc,IAAKD,EAAKE,I,EACtCnB,EAAAA,EAAAA,GAEK,YADDA,EAAAA,EAAAA,GAAoE,OAA9DoB,IAAKH,EAAKI,QAAQC,SAAUvB,MAAM,qBAAqBwB,IAAI,I,aAErEvB,EAAAA,EAAAA,GAAiC,WAAAwB,EAAAA,EAAAA,IAA1BP,EAAKI,QAAQI,OAAK,IACzBzB,EAAAA,EAAAA,GAQK,YAPDA,EAAAA,EAAAA,GAMM,MANN0B,EAMM,WALF1B,EAAAA,EAAAA,GAE+B,SAFxB2B,KAAK,SAAS5B,MAAM,eAAe6B,IAAI,IACzCC,SAAUZ,EAAKE,KAAOZ,EAAAuB,OAAOC,Y,yBAA6Bd,EAAKe,IAAGC,EAClEC,SAAMD,GAAEE,EAAAC,WAAWnB,I,kBADuCA,EAAKe,SAAG,G,QAAxB,OAE/ChC,EAAAA,EAAAA,GACM,MADNqC,EAA8B,KAACb,EAAAA,EAAAA,IAAGP,EAAKI,QAAQiB,MAAI,QAI3DtC,EAAAA,EAAAA,GAAqC,UAAjC,QAAIwB,EAAAA,EAAAA,IAAGP,EAAKI,QAAQkB,OAAK,IAC7BvC,EAAAA,EAAAA,GAA6B,UAAzB,QAAIwB,EAAAA,EAAAA,IAAGP,EAAKuB,OAAK,IACrBxC,EAAAA,EAAAA,GAEiD,YAF7CA,EAAAA,EAAAA,GAEwC,UAFhC2B,KAAK,SAAS5B,MAAM,yBACvB8B,SAAUtB,EAAAuB,OAAOC,cAAgBd,EAAKE,GAAKsB,QAAKR,GAAEE,EAAAO,eAAezB,EAAKE,K,uBAIvFnB,EAAAA,EAAAA,GAIQ,QAJR2C,EAIQ,EAHJ3C,EAAAA,EAAAA,GAEK,YADDA,EAAAA,EAAAA,GAAqE,KAArE4C,EAAiC,aAASpB,EAAAA,EAAAA,IAAGjB,EAAAC,KAAKqC,aAAW,UAIzE7C,EAAAA,EAAAA,GAOE,MAPF8C,EAOE,EANFC,EAAAA,EAAAA,IAEcC,EAAA,CAFDC,GAAG,aAAW,C,kBACvB,IAA2F,CAA3FC,K,OAEJH,EAAAA,EAAAA,IAEcC,EAAA,CAFDC,GAAG,UAAQ,C,kBACpB,IAAwF,CAAxFE,K,wBAIR/C,EAAAA,EAAAA,IAOM,MAPNgD,EAOM,CANFC,GAGAN,EAAAA,EAAAA,IAEcC,EAAA,CAFDC,GAAG,aAAW,C,kBACvB,IAA2F,CAA3FK,K,yBAQxB,GACIC,OACI,MAAO,CACHC,SAAU,GACVnC,QAAS,CAAC,EACVS,OAAQ,CACJC,YAAa,IAEjB0B,KAAM,CACFC,KAAM,CACFC,KAAM,GACNC,MAAO,GACPC,IAAK,GACLC,QAAS,IAEbC,QAAS,IAEbvD,KAAM,CAAC,EACPwD,SAAU,GACVC,YAAa,GAErB,EACAC,QAAS,CACLC,UAEI,MAAMC,EAAO,2DACbC,KAAKC,WAAY,EACjBC,QAAQC,IAAIJ,GACZC,KAAKI,MAAMC,IAAIN,GACVO,MAAMC,IACHL,QAAQC,IAAII,EAAIrB,KAAKA,MACrBc,KAAK7D,KAAOoE,EAAIrB,KAAKA,KACrBc,KAAKL,SAAWY,EAAIZ,QAAQ,GAExC,EACAtB,eAAevB,GAEXkD,KAAKvC,OAAOC,YAAcZ,EAE1B,MAAMiD,EAAO,4DAAiEjD,IAC9EoD,QAAQC,IAAIJ,GACZC,KAAKI,MAAMI,OAAOT,GACbO,MAAMG,IAEHT,KAAKU,kBAAkBD,EAAU,WACjCT,KAAKvC,OAAOC,YAAc,GAC1BsC,KAAKF,SAAS,GAE1B,EACA/B,WAAWnB,GACPsD,QAAQC,IAAIvD,GAEZ,MAAMmD,EAAO,4DAAiEnD,EAAKE,KAC7EX,EAAO,CACTwE,WAAY/D,EAAK+D,WACjBhD,IAAKf,EAAKe,KAEdqC,KAAKI,MAAMQ,IAAIb,EAAK,CAAEb,KAAM/C,IACvBmE,MAAMC,IACHL,QAAQC,IAAII,GACZP,KAAKvC,OAAOC,YAAc,GAC1BsC,KAAKF,SAAS,GAE1B,EACAe,cACI,MAAMd,EAAO,4DACPe,EAAQd,KAAKZ,KACnBY,KAAKI,MAAMW,KAAKhB,EAAK,CAAEb,KAAM4B,IACxBR,MAAMC,IACHL,QAAQC,IAAII,GACZP,KAAKU,kBAAkBH,EAAK,QAC5B,MAAMS,EAAUT,EAAIrB,KAAK8B,QACzBhB,KAAKiB,QAAQC,KAAM,cAAaF,IAAU,GAEtD,GAEJG,UACInB,KAAKF,SACT,G,QChJJ,MAAMsB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://0418/./src/views/CartList.vue","webpack://0418/./src/views/CartList.vue?9bdf"],"sourcesContent":["<template>\r\n    <div class=\"container my-5\">\r\n            <div class=\"col-12\">\r\n                <div v-if=\"cart.carts.length > 0\">\r\n                    <div class=\"row text-center my-5\">\r\n                        <ul class=\"d-flex justify-content-around gap-3 fs-4 my-3\">\r\n                            <li class=\"border p-3 bg-primary text-white border-r-20 \">Step1<br />購物清單</li>\r\n                            <li class=\"border p-3  border-r-20 \">Step2<br />填寫資料</li>\r\n                            <li class=\"border p-3 border-r-20 text-secondary\">Step3<br />結帳流程</li>\r\n                        </ul>\r\n                    </div>\r\n                    <table class=\"table border fs-5 align-middle text-center\">\r\n                        <thead class=\"bg-primary text-white  \">\r\n                            <!-- <th colspan=\"6\"><h3>購物清單</h3></th> -->\r\n                            <tr>\r\n                                <th>圖片</th>\r\n                                <th>品名</th>\r\n                                <th style=\"width: 200px;\">數量</th>\r\n                                <th>單價</th>\r\n                                <th>小計</th>\r\n                                <th></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n                                <td>\r\n                                    <img :src=\"item.product.imageUrl\" class=\"img-object-fit-100\" alt=\"\">\r\n                                </td>\r\n                                <td>{{ item.product.title }}</td>\r\n                                <td>\r\n                                    <div class=\"input-group\">\r\n                                        <input type=\"number\" class=\"form-control\" min=\"1\"\r\n                                            :disabled=\"item.id === status.loadingItem\" v-model.number=\"item.qty\"\r\n                                            @change=\"updateCart(item)\">\r\n                                        <div class=\"input-group-text\">/{{ item.product.unit }}\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                                <td>NT$ {{ item.product.price }}</td>\r\n                                <td>NT$ {{ item.total }}</td>\r\n                                <td><button type=\"button\" class=\"btn btn-outline-danger\"\r\n                                        :disabled=\"status.loadingItem === item.id\" @click=\"removeCartItem(item.id)\"><i\r\n                                            class=\"bi bi-x-lg\"></i></button></td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <tfoot class=\"fs-2\">\r\n                            <tr>\r\n                                <td colspan=\"5\" class=\"text-end\">總計 共 NT$ {{ cart.final_total }}</td>\r\n                            </tr>\r\n                        </tfoot>\r\n                    </table>\r\n                    <div class=\"d-flex justify-content-between\">\r\n                    <router-link to=\"/products\">\r\n                        <button class=\"btn btn-lg btn-secondary\"><i class=\"bi bi-caret-left-fill\"></i>繼續購物</button>\r\n                    </router-link>\r\n                    <router-link to=\"/order\">\r\n                        <button class=\"btn btn-lg btn-danger\">下一步<i class=\"bi bi-caret-right-fill\"></i></button>\r\n                    </router-link>\r\n                </div>\r\n                </div>\r\n                <div class=\"mb-3 no-shop-box\" v-else>\r\n                    <h3 class=\"py-5 mt-3\">\r\n                        哎呀！您的購物車是空的，趕快去挑選吧！\r\n                    </h3>\r\n                    <router-link to=\"/products\">\r\n                        <button class=\"btn btn-lg btn-secondary\"><i class=\"bi bi-caret-left-fill\"></i>繼續購物</button>\r\n                    </router-link>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            products: [],\r\n            product: {},\r\n            status: {\r\n                loadingItem: '', // 對應品項 id\r\n            },\r\n            form: {\r\n                user: {\r\n                    name: '',\r\n                    email: '',\r\n                    tel: '',\r\n                    address: '',\r\n                },\r\n                message: '',\r\n            },\r\n            cart: {},\r\n            messages: '',\r\n            coupon_code: '',\r\n        };\r\n    },\r\n    methods: {\r\n        getCart() {\r\n            // [API]: /api/:api_path/cart[方法]: get\r\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n            this.isLoading = true;\r\n            console.log(url);\r\n            this.$http.get(url)\r\n                .then((res) => {\r\n                    console.log(res.data.data);\r\n                    this.cart = res.data.data;\r\n                    this.messages = res.messages;\r\n                })\r\n        },\r\n        removeCartItem(id) {\r\n            // console.log(id);\r\n            this.status.loadingItem = id;\r\n            // [API]: /api/:api_path/cart/:id[方法]: delete\r\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n            console.log(url);\r\n            this.$http.delete(url)\r\n                .then((response) => {\r\n                    // console.log(res);\r\n                    this.$httpMessageState(response, '移除購物車品項');\r\n                    this.status.loadingItem = '';\r\n                    this.getCart();\r\n                })\r\n        },\r\n        updateCart(item) {\r\n            console.log(item);\r\n            // [API]: /api/:api_path/cart/:id[方法]: put[說明]: product_id(String)、qty(Number) 為必填欄位、[參數]: { \"data\": { \"product_id\":\"-L9tH8jxVb2Ka_DYPwng\",\"qty\":1 } }\r\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n            const cart = {\r\n                product_id: item.product_id,\r\n                qty: item.qty,\r\n            };\r\n            this.$http.put(url, { data: cart })\r\n                .then((res) => {\r\n                    console.log(res);\r\n                    this.status.loadingItem = '';\r\n                    this.getCart();\r\n                })\r\n        },\r\n        createOrder() {\r\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\r\n            const order = this.form;\r\n            this.$http.post(url, { data: order })\r\n                .then((res) => {\r\n                    console.log(res);\r\n                    this.$httpMessageState(res, \"送出訂單\");\r\n                    const orderId = res.data.orderId;\r\n                    this.$router.push(`./checkout/${orderId}`);\r\n                });\r\n        },\r\n    },\r\n    created() {\r\n        this.getCart()\r\n    },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.img-object-fit-100 {\r\n    height: 100px;\r\n    object-fit: cover;\r\n}\r\n</style>\r\n\r\n","import { render } from \"./CartList.vue?vue&type=template&id=2eea4bf5&scoped=true\"\nimport script from \"./CartList.vue?vue&type=script&lang=js\"\nexport * from \"./CartList.vue?vue&type=script&lang=js\"\n\nimport \"./CartList.vue?vue&type=style&index=0&id=2eea4bf5&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\黃則叡\\\\Desktop\\\\vue cli\\\\coffee2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2eea4bf5\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_12","colspan","_createElementBlock","_hoisted_1","_hoisted_2","$data","cart","carts","length","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","item","key","id","src","product","imageUrl","alt","_toDisplayString","title","_hoisted_8","type","min","disabled","status","loadingItem","qty","$event","onChange","$options","updateCart","_hoisted_10","unit","price","total","onClick","removeCartItem","_hoisted_14","_hoisted_15","final_total","_hoisted_16","_createVNode","_component_router_link","to","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","data","products","form","user","name","email","tel","address","message","messages","coupon_code","methods","getCart","url","this","isLoading","console","log","$http","get","then","res","delete","response","$httpMessageState","product_id","put","createOrder","order","post","orderId","$router","push","created","__exports__","render"],"sourceRoot":""}