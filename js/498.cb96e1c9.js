"use strict";(self["webpackChunk_0418"]=self["webpackChunk_0418"]||[]).push([[498],{498:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var s=a(3396),l=a(7139),o=a(9242);const i=t=>((0,s.dD)("data-v-2eea4bf5"),t=t(),(0,s.Cn)(),t),r={class:"container my-5"},d={class:"col-12"},n={key:0},c=(0,s.uE)('<div class="row text-center my-5" data-v-2eea4bf5><ul class="d-flex justify-content-around gap-3 fs-4 my-3" data-v-2eea4bf5><li class="border p-3 bg-primary text-white border-r-20" data-v-2eea4bf5>Step1<br data-v-2eea4bf5>購物清單</li><li class="border p-3 border-r-20" data-v-2eea4bf5>Step2<br data-v-2eea4bf5>填寫資料</li><li class="border p-3 border-r-20 text-secondary" data-v-2eea4bf5>Step3<br data-v-2eea4bf5>結帳流程</li></ul></div>',1),u={class:"table border fs-5 align-middle text-center"},p=i((()=>(0,s._)("thead",{class:"bg-primary text-white"},[(0,s._)("tr",null,[(0,s._)("th",null,"圖片"),(0,s._)("th",null,"品名"),(0,s._)("th",{style:{width:"200px"}},"數量"),(0,s._)("th",null,"單價"),(0,s._)("th",null,"小計"),(0,s._)("th")])],-1))),b=["src"],h={class:"input-group"},g=["disabled","onUpdate:modelValue","onChange"],f={class:"input-group-text"},_=["disabled","onClick"],m=i((()=>(0,s._)("i",{class:"bi bi-x-lg"},null,-1))),v=[m],y={class:"fs-2"},w={colspan:"5",class:"text-end"},x={class:"d-flex justify-content-between"},C=i((()=>(0,s._)("button",{class:"btn btn-lg btn-secondary"},[(0,s._)("i",{class:"bi bi-caret-left-fill"}),(0,s.Uk)("繼續購物")],-1))),k=i((()=>(0,s._)("button",{class:"btn btn-lg btn-danger"},[(0,s.Uk)("下一步"),(0,s._)("i",{class:"bi bi-caret-right-fill"})],-1))),$={key:1,class:"mb-3 no-shop-box"},I=i((()=>(0,s._)("h3",{class:"py-5 mt-3"}," 哎呀！您的購物車是空的，趕快去挑選吧！ ",-1))),D=i((()=>(0,s._)("button",{class:"btn btn-lg btn-secondary"},[(0,s._)("i",{class:"bi bi-caret-left-fill"}),(0,s.Uk)("繼續購物")],-1)));function U(t,e,a,i,m,U){const z=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",d,[m.cart.carts.length>0?((0,s.wg)(),(0,s.iD)("div",n,[c,(0,s._)("table",u,[p,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.cart.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,[(0,s._)("img",{src:t.product.imageUrl,class:"img-object-fit-100",alt:""},null,8,b)]),(0,s._)("td",null,(0,l.zw)(t.product.title),1),(0,s._)("td",null,[(0,s._)("div",h,[(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",min:"1",disabled:t.id===m.status.loadingItem,"onUpdate:modelValue":e=>t.qty=e,onChange:e=>U.updateCart(t)},null,40,g),[[o.nr,t.qty,void 0,{number:!0}]]),(0,s._)("div",f,"/"+(0,l.zw)(t.product.unit),1)])]),(0,s._)("td",null,"NT$ "+(0,l.zw)(t.product.price),1),(0,s._)("td",null,"NT$ "+(0,l.zw)(t.total),1),(0,s._)("td",null,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger",disabled:m.status.loadingItem===t.id,onClick:e=>U.removeCartItem(t.id)},v,8,_)])])))),128))]),(0,s._)("tfoot",y,[(0,s._)("tr",null,[(0,s._)("td",w,"總計 共 NT$ "+(0,l.zw)(m.cart.final_total),1)])])]),(0,s._)("div",x,[(0,s.Wm)(z,{to:"/products"},{default:(0,s.w5)((()=>[C])),_:1}),(0,s.Wm)(z,{to:"/order"},{default:(0,s.w5)((()=>[k])),_:1})])])):((0,s.wg)(),(0,s.iD)("div",$,[I,(0,s.Wm)(z,{to:"/products"},{default:(0,s.w5)((()=>[D])),_:1})]))])])}a(7658);var z={data(){return{products:[],product:{},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},messages:"",coupon_code:""}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/coffee-api/cart";this.isLoading=!0,console.log(t),this.$http.get(t).then((t=>{console.log(t.data.data),this.cart=t.data.data,this.messages=t.messages}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/coffee-api/cart/${t}`;console.log(e),this.$http.delete(e).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart()}))},updateCart(t){console.log(t);const e=`https://vue3-course-api.hexschool.io/api/coffee-api/cart/${t.id}`,a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then((t=>{console.log(t),this.status.loadingItem="",this.getCart()}))},createOrder(){const t="https://vue3-course-api.hexschool.io/api/coffee-api/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{console.log(t),this.$httpMessageState(t,"送出訂單");const e=t.data.orderId;this.$router.push(`./checkout/${e}`)}))}},created(){this.getCart()}},S=a(89);const q=(0,S.Z)(z,[["render",U],["__scopeId","data-v-2eea4bf5"]]);var j=q}}]);
//# sourceMappingURL=498.cb96e1c9.js.map